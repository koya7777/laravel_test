#--------------------------------------------
# ◇Chapter14 本管理アプリ：ページネーションを使用する 
#--------------------------------------------



#**************************************************
# 1. コントローラ：indexメソッドの修正
#**************************************************
 BooksController に 以下コードを貼り付けます（リスト14.2）。
#--------------------------------------------
#以下[END]までの全てのコード、indexメソッドのみ上書き。

    //本ダッシュボード表示
    public function index() {
        $books = Book::orderBy('created_at', 'asc')->paginate(3);
        return view('books', [
            'books' => $books
        ]);
    }

#[END]--------------------------------------------
# paginate(3)の"3"は 1ページに表示するレコード数です。




#**************************************************
# 2. ビュー：コードを追加
#**************************************************
 books.blade.php に 以下コードを追加します（リスト14.3）。
#--------------------------------------------
#以下[END]までの全てのコード、books.blade.phpの @endifの上の行くらいに追加してみましょう。


        <div class="row">
            <div class="col-md-4 offset-md-4">
                {{ $books->links()}}
            </div>
       </div>
       
       
       
#[END]--------------------------------------------
#  {{ $books->links()}} がリンクを表示するメソッドです。





#**************************************************
# <重要›ページリンクをクリックしたら「エラーが表示される場合」の対処
#**************************************************
# App\Http\Middleware\TrustProxies.php を開き以下の１行を以下のように変更する（リスト14.4）
------------------------------------------
protected $proxies = '*';
------------------------------------------
$proxiesに * を値としてもたせるだけで解決するはずです。









